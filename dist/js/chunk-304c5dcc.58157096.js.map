{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./src/views/Login.vue?309c","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5d79","webpack:///../../../src/components/VForm/VForm.ts","webpack:///./src/views/Login.vue?2f5f","webpack:///./src/views/Login.vue?5ae9"],"names":["$","$entries","entries","target","stat","O","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","submit","apply","arguments","_v","_s","appName","attrs","model","value","credentials","callback","$$v","$set","expression","$store","state","settings","loading","staticRenderFns","mixins","data","email","password","beforeRouteEnter","to","from","next","meta","$vuetify","theme","ligth","methods","login","Object","errors","name","console","initRolesPermissions","$gates","setRoles","setPermissions","BindsAttrs","RegistrableProvide","extend","provide","form","inheritAttrs","props","disabled","Boolean","lazyValidation","readonly","inputs","watchers","errorBag","watch","handler","val","values","includes","$emit","deep","immediate","watchInput","input","watcher","$watch","_uid","valid","shouldValidate","hasOwnProperty","validate","filter","length","reset","forEach","resetErrorBag","setTimeout","resetValidation","register","push","unregister","found","find","i","unwatch","$delete","render","h","novalidate","attrs$","e","$slots","default","component","VBtn","VForm","VTextField"],"mappings":"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","file":"js/chunk-304c5dcc.58157096.js","sourcesContent":["var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-wrap\"},[_c('v-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit.apply(null, arguments)}}},[_c('h2',{staticClass:\"text-center text-h3 text--primary font-weight-bold py-5\"},[_vm._v(\" \"+_vm._s(_vm.appName)+\" \")]),_c('v-text-field',{attrs:{\"label\":\"Correo electrónico\",\"required\":\"\"},model:{value:(_vm.credentials.email),callback:function ($$v) {_vm.$set(_vm.credentials, \"email\", $$v)},expression:\"credentials.email\"}}),_c('v-text-field',{attrs:{\"type\":\"password\",\"required\":\"\",\"label\":\"Contraseña\"},model:{value:(_vm.credentials.password),callback:function ($$v) {_vm.$set(_vm.credentials, \"password\", $$v)},expression:\"credentials.password\"}}),_c('v-btn',{attrs:{\"type\":\"submit\",\"loading\":this.$store.state.settings.loading,\"depressed\":\"\",\"color\":\"primary\",\"block\":\"\"}},[_vm._v(\" Iniciar sesión\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-wrap\">\n    <v-form @submit.prevent=\"submit\">\n      <h2 class=\"text-center text-h3 text--primary font-weight-bold py-5\">\n        {{ appName }}\n      </h2>\n      <v-text-field\n        v-model=\"credentials.email\"\n        label=\"Correo electrónico\"\n        required\n      ></v-text-field>\n      <v-text-field\n        v-model=\"credentials.password\"\n        type=\"password\"\n        required\n        label=\"Contraseña\"\n      ></v-text-field>\n      <v-btn\n        type=\"submit\"\n        :loading=\"this.$store.state.settings.loading\"\n        depressed\n        color=\"primary\"\n        block\n      >\n        Iniciar sesión</v-btn\n      >\n    </v-form>\n  </div>\n</template>\n<script>\nimport snackbar from \"@/mixins/snackbar\";\nexport default {\n  mixins: [snackbar],\n  data() {\n    return {\n      appName: \"Instituto Alfa Laurel\",\n      credentials: {\n        email: \"admin@example.com\",\n        password: \"password\",\n      },\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    if (to.meta[\"darkTheme\"]) {\n      this.$vuetify.theme.ligth = true;\n    }\n    next();\n  },\n  methods: {\n    async login() {\n      try {\n        this.$store.commit(\"settings/TOGGLE_LOADING\", true);\n        await this.$store.dispatch(\"auth/login\", this.credentials);\n      } catch (e) {\n        const [errors] = Object.entries(e.response?.data?.errors);\n        this.showSnackBar(errors[0], errors[1]);\n      } finally {\n        this.$store.commit(\"settings/TOGGLE_LOADING\", false);\n      }\n    },\n    async submit() {\n      try {\n        await this.login();\n        if (this.$store.state.auth.logged) {\n          await this.initRolesPermissions();\n          await this.$router.replace({\n            name: this.$store.getters[\"auth/isAdmin\"] ? \"Admin\" : \"Home\",\n          });\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    initRolesPermissions() {\n      try {\n        this.$gates.setRoles(\n          this.$store.state.auth.roles.map((role) => role.name)\n        );\n        this.$gates.setPermissions(\n          this.$store.state.auth.permissions.map(\n            (permission) => permission.name\n          )\n        );\n      } catch (e) {\n        console.error(e.message);\n      }\n    },\n  },\n};\n</script>\n<style>\n.page-wrap {\n  display: flex;\n  align-items: center;\n  padding: 40px 1rem;\n  height: 100%;\n  min-height: 100vh;\n}\n.page-wrap form {\n  width: 100%;\n  max-width: 400px;\n  margin: 0 auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","// Components\nimport VInput from '../VInput/VInput'\n\n// Mixins\nimport mixins from '../../util/mixins'\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport { provide as RegistrableProvide } from '../../mixins/registrable'\n\n// Helpers\nimport { VNode } from 'vue'\n\ntype ErrorBag = Record<number, boolean>\ntype VInputInstance = InstanceType<typeof VInput>\ntype Watchers = {\n  _uid: number\n  valid: () => void\n  shouldValidate: () => void\n}\n\n/* @vue/component */\nexport default mixins(\n  BindsAttrs,\n  RegistrableProvide('form')\n  /* @vue/component */\n).extend({\n  name: 'v-form',\n\n  provide (): object {\n    return { form: this }\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    disabled: Boolean,\n    lazyValidation: Boolean,\n    readonly: Boolean,\n    value: Boolean,\n  },\n\n  data: () => ({\n    inputs: [] as VInputInstance[],\n    watchers: [] as Watchers[],\n    errorBag: {} as ErrorBag,\n  }),\n\n  watch: {\n    errorBag: {\n      handler (val) {\n        const errors = Object.values(val).includes(true)\n\n        this.$emit('input', !errors)\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n\n  methods: {\n    watchInput (input: any): Watchers {\n      const watcher = (input: any): (() => void) => {\n        return input.$watch('hasError', (val: boolean) => {\n          this.$set(this.errorBag, input._uid, val)\n        }, { immediate: true })\n      }\n\n      const watchers: Watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {},\n      }\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', (val: boolean) => {\n          if (!val) return\n\n          // Only watch if we're not already doing it\n          if (this.errorBag.hasOwnProperty(input._uid)) return\n\n          watchers.valid = watcher(input)\n        })\n      } else {\n        watchers.valid = watcher(input)\n      }\n\n      return watchers\n    },\n    /** @public */\n    validate (): boolean {\n      return this.inputs.filter(input => !input.validate(true)).length === 0\n    },\n    /** @public */\n    reset (): void {\n      this.inputs.forEach(input => input.reset())\n      this.resetErrorBag()\n    },\n    resetErrorBag () {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {}\n        }, 0)\n      }\n    },\n    /** @public */\n    resetValidation () {\n      this.inputs.forEach(input => input.resetValidation())\n      this.resetErrorBag()\n    },\n    register (input: VInputInstance) {\n      this.inputs.push(input)\n      this.watchers.push(this.watchInput(input))\n    },\n    unregister (input: VInputInstance) {\n      const found = this.inputs.find(i => i._uid === input._uid)\n\n      if (!found) return\n\n      const unwatch = this.watchers.find(i => i._uid === found._uid)\n      if (unwatch) {\n        unwatch.valid()\n        unwatch.shouldValidate()\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid)\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid)\n      this.$delete(this.errorBag, found._uid)\n    },\n  },\n\n  render (h): VNode {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$,\n      },\n      on: {\n        submit: (e: Event) => this.$emit('submit', e),\n      },\n    }, this.$slots.default)\n  },\n})\n","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=2a10b49d&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VForm,VTextField})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}