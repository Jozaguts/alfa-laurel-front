(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ee7a935"],{"3bee":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{attrs:{headers:e.headers,items:e.desserts,search:e.search,loading:e.loading,"loading-text":"Cargando... por favor espere","footer-props":{"items-per-page-text":"Roles por página"}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[e._v("Roles")]),r("v-divider",{staticClass:"mx-4",attrs:{vertical:""}}),r("v-spacer"),r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),a),[e._v(" + Añadir Rol ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Nombre"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancelar ")]),r("v-btn",{attrs:{color:"blue darken-1",disabled:e.isBtbBlocked,text:""},on:{click:e.save}},[e._v(" Guardar ")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[r("v-card",[r("v-card-title",{staticClass:"text-h5"},[e._v("¿Estas seguro de eliminar este rol?")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",disabled:e.isBtbBlocked,text:""},on:{click:e.deletePermission}},[e._v("Aceptar")]),r("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[r("v-btn",{attrs:{plain:""},on:{click:function(t){return e.showDialog("delete",a.id)}}},[r("v-icon",[e._v(" mdi-delete ")])],1)]}}])})],1)},n=[],i=r("1da1"),s=(r("96cf"),r("caad"),r("2532"),r("b0c0"),r("c3e5")),o=r("a4e0"),c=new s["a"],l={mixins:[o["a"]],name:"Roles",data:function(){return{formTitle:"Añadir Rol",loading:!0,idSelected:null,isBtbBlocked:!1,editedItem:{name:null},dialog:!1,dialogDelete:!1,search:null,headers:[{text:"Nombre",align:"start",filterable:!0,value:"name"},{text:"Acciones",value:"actions",sortable:!1}],desserts:[]}},created:function(){this.init()},methods:{showDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e){case"delete":this.dialogDelete=!this.dialogDelete,this.idSelected=t;break}},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem={},e.editedIndex=-1}))},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isBtbBlocked=!0,t.next=4,c.setRole(e.editedItem);case 4:return t.next=6,e.init();case 6:return t.next=8,e.showSnackBar("Exito","Rol agregado correctamente","success");case 8:e.dialog=!1,e.isBtbBlocked=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](0),r="",a="",t.t0.response.data.message.includes("already exists")&&(r="Ya existe",a="Role ".concat(e.editedItem.name)),e.showSnackBar(a,r);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()},deletePermission:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.idSelected){t.next=16;break}return t.prev=1,e.isBtbBlocked=!0,t.next=5,c.deleteRole({roleId:e.idSelected});case 5:return t.next=7,e.init();case 7:return t.next=9,e.showSnackBar("Exito","Rol Eliminado correctamente","success");case 9:e.dialogDelete=!1,e.isBtbBlocked=!1,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),e.showSnackBar("Error","No fue posible eliminar el rol","error");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.getRoles();case 2:r=t.sent,a=r.data,e.desserts=a,e.editedItem={name:null},e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}}},u=l,d=(r("5feb"),r("2877")),p=r("6544"),v=r.n(p),m=r("8336"),f=r("b0af"),b=r("99d9"),h=r("62ad"),g=r("a523"),x=r("8fea"),k=r("169a"),w=r("ce7e"),R=r("132d"),B=r("0fd9"),y=r("2fa4"),V=r("8654"),_=r("71d9"),C=r("2a7f"),D=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=D.exports;v()(D,{VBtn:m["a"],VCard:f["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:h["a"],VContainer:g["a"],VDataTable:x["a"],VDialog:k["a"],VDivider:w["a"],VIcon:R["a"],VRow:B["a"],VSpacer:y["a"],VTextField:V["a"],VToolbar:_["a"],VToolbarTitle:C["a"]})},"5feb":function(e,t,r){"use strict";r("7458")},7458:function(e,t,r){},c3e5:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r("1da1"),n=r("d4ec"),i=r("bee2"),s=(r("96cf"),r("b0c0"),r("bc3a")),o=r.n(s),c=function(){function e(){Object(n["a"])(this,e)}return Object(i["a"])(e,[{key:"setPermission",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.name,e.next=3,o.a.post("/api/permissions",{name:r.toLowerCase()});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getPermissions",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/permissions");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deletePermissions",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.permissionId,e.next=3,o.a.delete("/api/permissions/".concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setRole",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.name,e.next=3,o.a.post("/api/roles",{name:r.toLowerCase()});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRoles",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/roles");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteRole",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.roleId,e.next=3,o.a.delete("/api/roles/".concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()}}]);
//# sourceMappingURL=chunk-1ee7a935.0f62a74b.js.map